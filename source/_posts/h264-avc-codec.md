---
title: H264/AVC 编解码器原理总结
date: 2021-12-16 14:41:20
tags:
    - H264
    - AVC
---
# H.264/AVC的应用
H.264 支持三个不同档次：
> 基本档次：主要用于“视频会话”，如会议电视，可视电话，远程医疗、远程教学等；
> 扩展档次：主要用于网络的视频流，如视频点播；
> 主要档次：主要用于消费电子应用，如数字电视广播，数字视频存储等。

# H.264/AVC编解码器
## 编码器
H.264 编码器的功能组成如下图所示

![](h264_enc_flow_2.png)
![](h264_enc_flow.png)
## 解码器
H.264解码器的功能组成如下图所示
![](h264_dec_flow.png)
# H.264/AVC的结构
## 术语
### 场和帧
视频的一场或一帧可用来产生一个编码图像。通常，视频帧可分成两种类型：连续或隔行视频帧。在电视中，为减少大面积闪烁现象，把一帧分成两个隔行的场。显然，这时场内邻行之间的空间相关性较强，而帧内邻近行空间相关性强，因此活动量较小或静止的图像宜采用帧编码方式，对活动量较大的运动图像则宜采用场编码方式。
### 宏块、片
一个编码图像通常划分成若干宏块组成，一个宏块由一个 16×16 亮度像素和附加的一个 8×8 Cb和一个 8×8 Cr 彩色像素块组成。每个图象中，若干宏块被排列成片的形式。
I 片只包含 I 宏块， P 片可包含 P 和 I 宏块，而 B 片可包含 B 和 I 宏块。
I 宏块利用从当前片中已解码的像素作为参考进行帧内预测（不能取其它片中的已解码像素作为参考进行帧内预测）。
P 宏块利用前面已编码图象作为参考图象进行帧内预测，一个帧内编码的宏块可进一步作宏块的分割：即 16×16、 16×8、 8×16 或 8×8 亮度像素块（以及附带的彩色像素）；如果选了 8×8 的子宏块，则可再分成各种子宏块的分割，其尺寸为 8×8、 8×4、 4×8 或 4×4 亮度像素块（以及附带的彩色像素）。
B 宏块则利用双向的参考图象（当前和未来的已编码图象帧）进行帧内预测。
## 档次和级
H.264 规定了三种档次，每个档次支持一组特定的编码功能如下图所示，并支持一类特定的应用。每一档次设置不同参数（如取样速率、图像尺寸、编码比特率等），得到编解码器性能不同的级。
![](h264_enc_profile.png)
> 基本档次：利用 I 片和 P 片支持帧内和帧间编码，支持利用基于上下文的自适应的变长编码进行的熵编码（CAVLC）。主要用于可视电话、会议电视、无线通信等实时视频通信；
> 主要档次：支持隔行视频，采用 B 片的帧间编码和采用加权预测的帧内编码；支持利用基于上下文的自适应的算术编码（CABAC）。主要用于数字广播电视与数字视频存储；
> 扩展档次：支持码流之间有效的切换（SP 和 SI 片）、改进误码性能（数据分割），但不支持隔行视频和 CABAC。展档次包括了基本档次的所有功能，而不能包括主要档次的。




[REF](https://www.cnblogs.com/CoderTian/p/8596068.html)